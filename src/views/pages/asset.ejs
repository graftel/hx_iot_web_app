 <%- include ../partials/header.ejs %>
<link href="dist/css/machine-design.css" rel="stylesheet">

<body>
	<div id="wrapper">
		<!-- Navigation -->
		<nav class="navbar navbar-default navbar-static-top" role="navigation"
			style="margin-bottom: 0"><%- include ../partials/header-nav.ejs
			%> <%- include ../partials/side-nav.ejs %></nav>
	<div id="page-wrapper">
			<div class="row">
				<div class="page-header col-lg-12">
					<h1 style="text-align:left; float:left;" ><a href="javascript:window.location.reload();"> <%- assets[asset] %></a></h1> 
					<h1 id="locationHeading"  style="text-align:left; float:left;padding-left: 4px;"></h1>
				</div>
			</div>
			<!-- /.row -->
			<div class="row">
				<table class="table table-responsive table-striped">
					<thead>
						<tr>
							<th>COLD Heat Gain(Btu/hour)</th>
							<th>HOT Heat Loss(Btu/hour)</th>
							<th>Heat Balance Error(Btu/hour)</th>
							<th>Heat Balance Error(%)</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td><%= values["COLD_Heat_Gain(Btu/hr)"].toFixed(2) %></td>
							<td><%= values["HOT_Heat_Loss_(Btu/hr)"].toFixed(2) %></td>
							<td><%= values["Heat_Balance_Error(Btu/hr)"].toFixed(2) %></td>
							<td><%= values["Heat_Balance_Error(%)"].toFixed(2) %></td>
						</tr>
					</tbody>
				</table>
			</div>

			<div id="machine-image">
			<div class="row">
				<div id="machine">
          <svg
   xmlns:osb="http://www.openswatchbook.org/uri/2009/osb"
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   id="svg2"
   height="137.17619mm"
   width="270.01938mm"
   version="1.1"
   viewBox="0 0 956.75678 486.06175"
   inkscape:version="0.92.1 r15371"
   sodipodi:docname="g.svg">
  <defs
     id="defs8">
    <marker
       inkscape:stockid="Arrow1Mend"
       orient="auto"
       refY="0"
       refX="0"
       id="Arrow1Mend"
       style="overflow:visible"
       inkscape:isstock="true">
      <path
         id="path4487"
         d="M 0,0 5,-5 -12.5,0 5,5 0,0 Z"
         style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt"
         transform="matrix(-0.4,0,0,-0.4,-4,0)"
         inkscape:connector-curvature="0" />
    </marker>
    <linearGradient
       id="linearGradient8482"
       osb:paint="gradient">
      <stop
         style="stop-color:#ff0000;stop-opacity:1;"
         offset="0"
         id="stop8484" />
      <stop
         style="stop-color:#ff0000;stop-opacity:0;"
         offset="1"
         id="stop8486" />
    </linearGradient>
    <marker
       inkscape:isstock="true"
       style="overflow:visible"
       id="marker6675"
       refX="0"
       refY="0"
       orient="auto"
       inkscape:stockid="Arrow1Mend">
      <path
         transform="matrix(-0.4,0,0,-0.4,-4,0)"
         style="fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#ffffff;stroke-width:1pt;stroke-opacity:1"
         d="M 0,0 5,-5 -12.5,0 5,5 0,0 Z"
         id="path6677"
         inkscape:connector-curvature="0" />
    </marker>
    <marker
       inkscape:stockid="Arrow1Lend"
       orient="auto"
       refY="0"
       refX="0"
       id="Arrow1Lend"
       style="overflow:visible"
       inkscape:isstock="true">
      <path
         id="path4481"
         d="M 0,0 5,-5 -12.5,0 5,5 0,0 Z"
         style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1"
         transform="matrix(-0.8,0,0,-0.8,-10,0)"
         inkscape:connector-curvature="0" />
    </marker>
    <inkscape:path-effect
       effect="spiro"
       id="path-effect4472"
       is_visible="true" />
    <inkscape:path-effect
       effect="spiro"
       id="path-effect4299"
       is_visible="true" />
    <marker
       inkscape:stockid="Arrow1Lend"
       orient="auto"
       refY="0"
       refX="0"
       id="Arrow1Lend-9"
       style="overflow:visible"
       inkscape:isstock="true">
      <path
         inkscape:connector-curvature="0"
         id="path4481-4"
         d="M 0,0 5,-5 -12.5,0 5,5 0,0 Z"
         style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1"
         transform="matrix(-0.8,0,0,-0.8,-10,0)" />
    </marker>
    <inkscape:path-effect
       effect="spiro"
       id="path-effect4472-7"
       is_visible="true" />
    <marker
       inkscape:stockid="Arrow1Lend"
       orient="auto"
       refY="0"
       refX="0"
       id="Arrow1Lend-9-8"
       style="overflow:visible"
       inkscape:isstock="true">
      <path
         inkscape:connector-curvature="0"
         id="path4481-4-6"
         d="M 0,0 5,-5 -12.5,0 5,5 0,0 Z"
         style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1"
         transform="matrix(-0.8,0,0,-0.8,-10,0)" />
    </marker>
    <inkscape:path-effect
       effect="spiro"
       id="path-effect4472-7-9"
       is_visible="true" />
    <marker
       inkscape:stockid="Arrow1Lend"
       orient="auto"
       refY="0"
       refX="0"
       id="Arrow1Lend-9-8-3"
       style="overflow:visible"
       inkscape:isstock="true">
      <path
         inkscape:connector-curvature="0"
         id="path4481-4-6-5"
         d="M 0,0 5,-5 -12.5,0 5,5 0,0 Z"
         style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1"
         transform="matrix(-0.8,0,0,-0.8,-10,0)" />
    </marker>
    <inkscape:path-effect
       effect="spiro"
       id="path-effect4472-7-9-5"
       is_visible="true" />
    <marker
       inkscape:stockid="Arrow1Lend"
       orient="auto"
       refY="0"
       refX="0"
       id="Arrow1Lend-91"
       style="overflow:visible"
       inkscape:isstock="true">
      <path
         inkscape:connector-curvature="0"
         id="path4481-8"
         d="M 0,0 5,-5 -12.5,0 5,5 0,0 Z"
         style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1"
         transform="matrix(-0.8,0,0,-0.8,-10,0)" />
    </marker>
    <inkscape:path-effect
       effect="spiro"
       id="path-effect4472-77"
       is_visible="true" />
  </defs>
  <sodipodi:namedview
     pagecolor="#ffffff"
     bordercolor="#666666"
     borderopacity="1"
     objecttolerance="10"
     gridtolerance="10"
     guidetolerance="10"
     inkscape:pageopacity="0"
     inkscape:pageshadow="2"
     inkscape:window-width="1920"
     inkscape:window-height="1017"
     id="namedview6"
     showgrid="false"
     inkscape:zoom="1.2286295"
     inkscape:cx="407.47505"
     inkscape:cy="241.27739"
     inkscape:window-x="-8"
     inkscape:window-y="-8"
     inkscape:window-maximized="1"
     inkscape:current-layer="svg2"
     fit-margin-top="0"
     fit-margin-left="0"
     fit-margin-right="0"
     fit-margin-bottom="0" />
  <metadata
     id="metadata7">
    <rdf:RDF>
      <cc:Work
         rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type
           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
        <dc:title />
      </cc:Work>
    </rdf:RDF>
  </metadata>
  <path
     style="opacity:1;fill:#ff8080;fill-opacity:1;fill-rule:nonzero;stroke:#000000;stroke-width:2.63368201;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;paint-order:markers fill stroke"
     d="M 709.40461,134.94148 A 110.25211,107.54135 0 0 0 599.1538,242.48152 110.25211,107.54135 0 0 0 709.40461,350.02497 110.25211,107.54135 0 0 0 819.6554,242.48152 110.25211,107.54135 0 0 0 709.40461,134.94148 Z"
     id="path6736"
     inkscape:connector-curvature="0"
     inkscape:export-xdpi="96"
     inkscape:export-ydpi="96" />
  <ellipse
     style="fill:#ff8080;fill-opacity:1;stroke:#000000;stroke-width:2.96064377;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
     id="path4552"
     cx="249.99744"
     cy="242.43166"
     rx="110.84254"
     ry="107.39747"
     inkscape:export-xdpi="96"
     inkscape:export-ydpi="96" />
  <rect
     style="opacity:1;fill:#ffffff;fill-opacity:1;fill-rule:nonzero;stroke:#000000;stroke-width:2.66275263;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;paint-order:markers fill stroke"
     id="rect6794"
     width="460.83875"
     height="215.24281"
     x="249.38081"
     y="134.87704"
     inkscape:export-xdpi="96"
     inkscape:export-ydpi="96" />
  <rect
     style="opacity:1;fill:#3c94fa;fill-opacity:1;fill-rule:nonzero;stroke:#000000;stroke-width:2.43849373;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
     id="rect4550"
     width="460.83875"
     height="215.24281"
     x="249.38086"
     y="134.87704"
     inkscape:export-xdpi="96"
     inkscape:export-ydpi="96" />
  <rect
     style="opacity:1;fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#ffffff;stroke-width:1.69084799;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:1.69084797, 5.0725439;stroke-dashoffset:0;stroke-opacity:1"
     id="rect9030"
     width="112.44177"
     height="34.384422"
     x="262.32559"
     y="145.10919" />
  <path
     style="opacity:0.61000001;fill:none;fill-opacity:1;stroke:none;stroke-width:0.10101525;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
     d="m 341.35744,348.03569 -89.73825,-0.11352 0,-105.34247 0,-105.34251 143.78138,-0.29623 c 79.07981,-0.16289 181.86188,-0.29629 228.40454,-0.29629 l 84.6231,-9e-5 0,105.86228 0,105.86226 -138.66622,-0.11007 c -76.26647,-0.0605 -179.04848,-0.16119 -228.40455,-0.22345 z"
     id="path6276"
     inkscape:connector-curvature="0"
     inkscape:export-xdpi="96"
     inkscape:export-ydpi="96" />
  <rect
     style="opacity:1;fill:#ff8080;fill-opacity:1;fill-rule:nonzero;stroke:#000000;stroke-width:2.66874838;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;paint-order:markers fill stroke"
     id="rect7266"
     width="39.007919"
     height="13.955587"
     x="99.992317"
     y="234.3318"
     inkscape:export-xdpi="96"
     inkscape:export-ydpi="96" />
  <rect
     style="opacity:1;fill:#0073f9;fill-opacity:0.76470588;fill-rule:nonzero;stroke:#000000;stroke-width:2.66216135;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;paint-order:markers fill stroke"
     id="rect7266-48"
     width="38.578857"
     height="13.81416"
     x="96.002762"
     y="-320.73944"
     transform="matrix(0,1,-1,0,0,0)"
     inkscape:export-xdpi="96"
     inkscape:export-ydpi="96" />
  <rect
     style="opacity:1;fill:#3c94fa;fill-opacity:1;fill-rule:nonzero;stroke:#000000;stroke-width:2.66216159;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;paint-order:markers fill stroke"
     id="rect7266-48-9"
     width="38.578857"
     height="13.81416"
     x="350.32672"
     y="-679.16895"
     transform="matrix(0,1,-1,0,0,0)"
     inkscape:export-xdpi="96"
     inkscape:export-ydpi="96" />
  <text
     id="text8032"
     y="261.93954"
     x="429.62375"
     style="font-style:normal;font-weight:normal;line-height:0%;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.26458332"
     xml:space="preserve"
     inkscape:export-xdpi="96"
     inkscape:export-ydpi="96"><tspan
       style="font-size:70.45199585px;line-height:1.25;stroke-width:0.26458332"
       y="261.93954"
       x="429.62375"
       id="tspan8030"
       sodipodi:role="line">HX</tspan></text>
  <rect
     style="opacity:1;fill:#ff8080;fill-opacity:1;fill-rule:nonzero;stroke:#000000;stroke-width:2.66874838;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;paint-order:markers fill stroke"
     id="rect7266-8"
     width="39.900509"
     height="15.809223"
     x="819.49951"
     y="234.11282"
     inkscape:export-xdpi="96"
     inkscape:export-ydpi="96" />
  <circle
     style="opacity:0.847;fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#0000ff;stroke-width:2.57386971;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:2.57386963, 7.72160893;stroke-dashoffset:0;stroke-opacity:1"
     id="path4295"
     r="44.091545"
     cy="45.378479"
     cx="313.86038" />
  <circle
     style="opacity:0.847;fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#ff0000;stroke-width:2.57386971;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:2.57386963, 7.72160893;stroke-dashoffset:0;stroke-opacity:1"
     id="path4295-9-1"
     cy="239.32346"
     cx="45.371765"
     r="44.091545" />
  <circle
     style="opacity:0.847;fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#0000ff;stroke-width:2.57386971;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:2.57386963, 7.72160893;stroke-dashoffset:0;stroke-opacity:1"
     id="path4295-9-1-4"
     cy="440.68326"
     cx="671.97357"
     r="44.091545" />
  <circle
     style="opacity:0.847;fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#ff0000;stroke-width:2.57386971;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:2.57386963, 7.72160893;stroke-dashoffset:0;stroke-opacity:1"
     id="path4295-9-1-4-7"
     cy="239.39644"
     cx="911.38501"
     r="44.091545" />
  <rect
     style="opacity:1;fill:#3c94fa;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.90000004;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:0.90000004, 2.70000011;stroke-dashoffset:0;stroke-opacity:1"
     id="rect8490"
     width="11.270208"
     height="13.99153"
     x="308.20166"
     y="124.17093" />
  <rect
     style="opacity:1;fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#ffffff;stroke-width:1.69084799;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:1.69084797, 5.0725439;stroke-dashoffset:0;stroke-opacity:1"
     id="rect9030-1-1"
     width="93.65937"
     height="31.729492"
     x="719.97003"
     y="222.8349" />
  <rect
     style="opacity:1;fill:#ff8080;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.90000004;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:0.90000004, 2.70000011;stroke-dashoffset:0;stroke-opacity:1"
     id="rect8490-0"
     width="17.960733"
     height="11.257768"
     x="130.85571"
     y="235.63705" />
  <rect
     style="opacity:1;fill:#3c94fa;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.90000004;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:0.90000004, 2.70000011;stroke-dashoffset:0;stroke-opacity:1"
     id="rect8490-5"
     width="11.168463"
     height="13.991516"
     x="666.69214"
     y="344.98773" />
  <rect
     style="opacity:1;fill:#ff8080;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.90000004;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:0.90000004, 2.70000011;stroke-dashoffset:0;stroke-opacity:1"
     id="rect8490-5-0"
     width="9.3371525"
     height="13.075857"
     x="815.41345"
     y="235.49277" />
  <rect
     style="opacity:1;fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#ffffff;stroke-width:1.69084799;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:1.69084797, 5.0725439;stroke-dashoffset:0;stroke-opacity:1"
     id="rect9030-2"
     width="112.44177"
     height="34.384422"
     x="588.43787"
     y="306.62833" />
  <rect
     style="opacity:1;fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#ffffff;stroke-width:1.69084799;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:1.69084797, 5.0725439;stroke-dashoffset:0;stroke-opacity:1"
     id="rect9030-1-1-7"
     width="93.65937"
     height="31.729492"
     x="147.21283"
     y="224.14948" />
  <text
     xml:space="preserve"
     style="font-style:normal;font-weight:normal;font-size:20.50033951px;line-height:1.25;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.93750846"
     x="280.03348"
     y="53.226425"
     data-type="Temperature" data-location="COLD_IN" onclick="getData(this)" class="clickable"
     id="text4537"><tspan
       sodipodi:role="line"
       id="tspan4535"
       x="280.03348"
       y="53.226425"
       style="stroke-width:0.93750846"><%= values["Ave_COLD_Inlet(F)"].toFixed(2) %>F</tspan></text>
  <text
     xml:space="preserve"
     style="font-style:normal;font-weight:normal;font-size:20.50033951px;line-height:1.25;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.93750846"
     x="11.1499186"
     y="247.56779"
     data-type="Temperature" data-location="HOT_IN" onclick="getData(this)" class="clickable"
     id="text4541"><tspan
       sodipodi:role="line"
       id="tspan4539"
       x="11.1499186"
       y="247.56779"
       style="stroke-width:0.93750846"><%= values["Ave_HOT_Inlet(F)"].toFixed(2) %>F</tspan></text>
  <text
     xml:space="preserve"
     style="font-style:normal;font-weight:normal;font-size:20.50033951px;line-height:1.25;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.93750846"
     x="636.37885"
     y="446.53967"
     data-type="Temperature" data-location="COLD_OUT" onclick="getData(this)" class="clickable"
     id="text4545"><tspan
       sodipodi:role="line"
       id="tspan4543"
       x="636.37885"
       y="446.53967"
       style="stroke-width:0.93750846"><%= values["Ave_COLD_Outlet(F)"].toFixed(2) %>F</tspan></text>
  <text
     xml:space="preserve"
     style="font-style:normal;font-weight:normal;font-size:20.50033951px;line-height:1.25;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.93750846"
     x="877.68805"
     y="244.56779"
     data-type="Temperature" data-location="HOT_OUT" onclick="getData(this)" class="clickable"
     id="text4549"><tspan
       sodipodi:role="line"
       id="tspan4547"
       x="877.68805"
       y="244.56779"
       style="stroke-width:0.93750846"><%= values["Ave_HOT_Outlet(F)"].toFixed(2) %>F</tspan></text>
  <text
     xml:space="preserve"
     style="font-style:normal;font-weight:normal;font-size:20.50033951px;line-height:1.25;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.93750846"
     x="171.68002"
     y="249.51559"
     data-type="FlowMeter" data-location="HOT_FLOW_IN" onclick="getData(this)" class="clickable"
     id="text4553"><tspan
       sodipodi:role="line"
       id="tspan4551"
       x="145.68002"
       y="247.51559"
       style="font-size:17.00027084px;stroke-width:0.93750846"><%=values["HOT_Flow(gpm)"].toFixed(2) %>GPM</tspan></text>
  <text
     xml:space="preserve"
     style="font-style:normal;font-weight:normal;font-size:20.50033951px;line-height:1.25;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.93750846"
     x="268.82059"
     y="171.21036"
     data-type="FlowMeter" data-location="COLD_FLOW_IN" onclick="getData(this)" class="clickable"
     id="text4557"><tspan
       sodipodi:role="line"
       id="tspan4555"
       x="268.82059"
       y="171.21036"
       style="font-size:17.00027084px;stroke-width:0.93750846"><%=values["COLD_Flow(gpm)"].toFixed(2) %>GPM</tspan></text>
  <text
     xml:space="preserve"
     style="font-style:normal;font-weight:normal;font-size:20.50033951px;line-height:1.25;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.93750846"
     x="595.16998"
     y="332.21436"
      data-type="FlowMeter" data-location="COLD_FLOW_IN" onclick="getData(this)" class="clickable"
     id="text4561"><tspan
       sodipodi:role="line"
       id="tspan4559"
       x="595.16998"
       y="332.21436"
       style="font-size:17.00027084px;stroke-width:0.93750846"><%=values["COLD_Flow(gpm)"].toFixed(2) %>GPM</tspan></text>
  <text
     xml:space="preserve"
     style="font-style:normal;font-weight:normal;font-size:20.50033951px;line-height:1.25;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.93750846"
     x="725.49536"
     y="244.75253"
      data-type="FlowMeter" data-location="HOT_FLOW_IN" onclick="getData(this)" class="clickable"
     id="text4565"><tspan
       sodipodi:role="line"
       id="tspan4563"
       x="725.49536"
       y="244.75253"
       style="font-size:16.00027084px;stroke-width:0.93750846"><%=values["HOT_Flow(gpm)"].toFixed(2) %>GPM</tspan></text>
</svg>

					</div>
			</div>		
			</div>
			<div id="showDetails" style="display:none;">
				<%- include ../partials/machineReadings.ejs %>
			</div>
			<!-- /#page-wrapper -->
		</div>
	</div>
</body>
<%- include ../partials/scripts.ejs %>
<script src="js/d3.min.js"></script>
<head>
<script type="text/javascript">
	function getData(element) {
		var parameter = element.getAttribute("data-type");
		var location = element.getAttribute("data-location");
		 $.ajax({
			type : 'POST',
			url : '/asset/detail',
			data : {
				asset : "<%- asset %>",
				parameter : parameter,
				location : location
			},
			success : function(data) {
				$("#machine-image").hide();
				$("#showDetails").show();
				$("#locationHeading").text(setHeading(location));
				$("#showDetails").append(populateTable(JSON.parse(data), element));
				buildPlot(data);
			},
			error : function(err) {
		          if(err.status == 440)
		        	  document.location.reload(true);
		          console.log(err);
			}
		});
	}


	function populateTable(data,element){
		var latestValues = data[0];
		var calculatedValues = data[1];
		$(".nav.nav-pills li a").removeClass("active");
		var keys = Object.keys(calculatedValues);
		var table = $("#details table");
		table.data("showing",element.id);
		table.text("");
		var tableStructure = "";
		tableStructure = tableStructure + "<thead><tr> <th> Sensor ID </th>";
		keys.map(function(key){ tableStructure = tableStructure+"<th>"+key+"</th>"; });
		tableStructure = tableStructure + "</tr></thead>";
		tableStructure = tableStructure + '<tbody><tr  id="LatestValue"> <td> Latest Value(GPM) </td></tr>'
										+ '<tr id="Max"> <td> Maximum (GPM)</tr>'
										+ '<tr id="Min"> <td> Minimum(GPM) </td> </tr>'
										+ '<tr id="Mean"> <td> Mean(GPM) </td></tr>'
									//	+ '<tr id="Uncertainity"> <td> Measurement Uncertainity(GPM) </td></tr>'
										+ '<tr id="Std"> <td> Standard Deviation(GPM) </td></tr>'
										//+ '<tr id="Stability"> <td> Stability(GPM/min) </td></tr></tbody>';
		table.append(tableStructure);
		for(key of keys){
			var values = calculatedValues[key];
			table.find("tr#LatestValue td").last().after("<td>" + latestValues[key].toFixed(3) + "</td>");
			table.find("tr#Max td").last().after("<td>" + values["Max"].toFixed(3) + "</td>");
			table.find("tr#Min td").last().after("<td>" + values["Min"].toFixed(3) + "</td>");
			table.find("tr#Mean td").last().after("<td>" + values["Mean"].toFixed(3) + "</td>");
			//table.find("tr#Uncertainity td").last().after("<td>" + values["Uncertainity"].toFixed(3) + "</td>");
			table.find("tr#Std td").last().after("<td>" + values["Std"].toFixed(3) + "</td>");
			//table.find("tr#Stability td").last().after("<td>" + values["Stability"].toFixed(3) + "</td>");
		}
	}

	function setHeading(text){
		var str = "  > ";
		if(text.includes("HOT"))
			str = str + "HOT SIDE ";
		else
			str = str + "COLD SIDE ";
		
		if(!text.includes("FLOW")){
			if(text.includes("IN"))
				str = str + "IN ";
			else
				str = str + "OUT ";
		}
		
		if(text.includes("FLOW"))
			str = str + ": FLOW";
		else
			str = str + ": TEMPERATURE";
		return str;
	}

	setInterval(function(){
		   console.log("refreshing");
		   var table = $("#details table");
		   var element = document.getElementById(table.data("showing"));
		   if(element == null)
			   return document.location.reload(true);
		   getData(element);
		}, 1 * 60 * 1000);
</script>
</head>
