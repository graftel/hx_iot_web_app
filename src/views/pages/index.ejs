 <%- include ../partials/header.ejs %>
<body>

	<div id="wrapper">
		<!-- Navigation -->
		<nav class="navbar navbar-default navbar-static-top" role="navigation"
			style="margin-bottom: 0"><%- include ../partials/header-nav.ejs
			%> <%- include ../partials/side-nav.ejs %></nav>
		<div id="page-wrapper">
			<div class="row">
				<div class="col-lg-12">
					<h1 class="page-header">Dashboard</h1>
				</div>
				<!-- /.col-lg-12 -->
			</div>
			<!-- /.row -->

			<div class="row"><%- include ../partials/dashboard-panels.ejs
				%></div>
			<!-- /.row -->
			<!-- 	<div class="row">
				<div class="col-lg-6">
                    <div class="panel panel-primary">
                        <div class="panel-heading">
                            Temperature Data - Devices
                        </div>
                        /.panel-heading
                        <div class="panel-body">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Device ID</th>
                                            <th>Time Stamp</th>
                                            <th>Temperature</th>
                                        </tr>
                                    </thead>
                                    <tbody>

                                    </tbody>
                                </table>
                            </div>
                            /.table-responsive
                        </div>
                        /.panel-body
                    </div>
                    /.panel
                </div> -->
			<!-- /.row -->
			<div class="row">
				<hr>
				<div class="col-md-6"><%- include ../partials/chart.ejs %></div>

				<div class="col-md-4"><%- include ../partials/graph.ejs %></div>
			</div>
			<!-- /#page-wrapper -->
		</div>
	</div>
	<!-- /#wrapper -->
</body>
<%- include ../partials/scripts.ejs %>
<script type="text/javascript">
	$( document ).ready(function() {
		var refreshIntervalId =	setInterval(function(){
		getLiveData();
	},3000); 
	
	 function getLiveData(){
		$.ajax({
			type: 'POST',
            url: 'http://localhost:5000/live',						
            success: function(data) {
                updateGraph(data);
            },
            error: function(err){
            	clearInterval(refreshIntervalId);
            	console.log("Error in ajax");
				alert("Live streaming stopped");
            }
		
        }); 
	} })
	</script>

</html>
